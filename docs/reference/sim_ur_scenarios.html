<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate Under-Reporting Scenarios — sim_ur_scenarios • simaerep</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Under-Reporting Scenarios — sim_ur_scenarios"><meta name="description" content="Use with simulated portfolio data to generate under-reporting
stats for specified scenarios."><meta property="og:description" content="Use with simulated portfolio data to generate under-reporting
stats for specified scenarios."><meta property="og:image" content="https://openpharma.github.io/simaerep/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-123997499-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123997499-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simaerep</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/intro.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/inframe.html">Inframe Simulation Using Table Operations</a></li>
    <li><a class="dropdown-item" href="../articles/over.html">Over-Reporting Probability</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Statistical Performance</a></li>
    <li><a class="dropdown-item" href="../articles/funnel_perf.html">Comparing {simaerep} and Funnel Plot Performance</a></li>
    <li><a class="dropdown-item" href="../articles/sas_files.html">SAS Files as a Data Source</a></li>
    <li><a class="dropdown-item" href="../articles/portfolio_perf.html">(superseded) simaerep Portfolio Performance</a></li>
    <li><a class="dropdown-item" href="../articles/visit_med75.html">Adjusted Evaluation Point visit_med75</a></li>
    <li><a class="dropdown-item" href="../articles/usability_limits.html">Address Usability Limits of Bootstrap Method</a></li>
    <li><a class="dropdown-item" href="../articles/check_poisson.html">Check Poisson Test Applicability</a></li>
    <li><a class="dropdown-item" href="../articles/visits_or_days.html">Aggregate AEs by Days or Visit?</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/simaerep/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate Under-Reporting Scenarios</h1>
      <small class="dont-index">Source: <a href="https://github.com/openpharma/simaerep/blob/HEAD/R/simulate_test_data.R" class="external-link"><code>R/simulate_test_data.R</code></a></small>
      <div class="d-none name"><code>sim_ur_scenarios.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use with simulated portfolio data to generate under-reporting
stats for specified scenarios.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_ur_scenarios</span><span class="op">(</span></span>
<span>  <span class="va">df_portf</span>,</span>
<span>  extra_ur_sites <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ur_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  poisson_test <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  prob_lower <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  site_aggr_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  eval_sites_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df-portf">df_portf<a class="anchor" aria-label="anchor" href="#arg-df-portf"></a></dt>
<dd><p>dataframe as returned by <code><a href="sim_test_data_portfolio.html">sim_test_data_portfolio</a></code></p></dd>


<dt id="arg-extra-ur-sites">extra_ur_sites<a class="anchor" aria-label="anchor" href="#arg-extra-ur-sites"></a></dt>
<dd><p>numeric, set maximum number of additional
under-reporting sites, see details Default: 3</p></dd>


<dt id="arg-ur-rate">ur_rate<a class="anchor" aria-label="anchor" href="#arg-ur-rate"></a></dt>
<dd><p>numeric vector, set under-reporting rates for scenarios
Default: c(0.25, 0.5)</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>integer, denotes number of simulations, default = 1000</p></dd>


<dt id="arg-poisson-test">poisson_test<a class="anchor" aria-label="anchor" href="#arg-poisson-test"></a></dt>
<dd><p>logical, calculates poisson.test pvalue</p></dd>


<dt id="arg-prob-lower">prob_lower<a class="anchor" aria-label="anchor" href="#arg-prob-lower"></a></dt>
<dd><p>logical, calculates probability for getting a lower value</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>logical, use parallel processing see details, Default: FALSE</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>logical, show progress bar, Default: TRUE</p></dd>


<dt id="arg-site-aggr-args">site_aggr_args<a class="anchor" aria-label="anchor" href="#arg-site-aggr-args"></a></dt>
<dd><p>named list of parameters passed to
<code><a href="site_aggr.html">site_aggr</a></code>, Default: list()</p></dd>


<dt id="arg-eval-sites-args">eval_sites_args<a class="anchor" aria-label="anchor" href="#arg-eval-sites-args"></a></dt>
<dd><p>named list of parameters passed to
<code><a href="eval_sites.html">eval_sites</a></code>, Default: list()</p></dd>


<dt id="arg-check">check<a class="anchor" aria-label="anchor" href="#arg-check"></a></dt>
<dd><p>logical, perform data check and attempt repair with</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>dataframe with the following columns:</p><dl><dt><strong>study_id</strong></dt>
<dd><p>study identification</p></dd>

<dt><strong>site_number</strong></dt>
<dd><p>site identification</p></dd>

<dt><strong>n_pat</strong></dt>
<dd><p>number of patients at site</p></dd>

<dt><strong>n_pat_with_med75</strong></dt>
<dd><p>number of patients at site with visit_med75</p></dd>

<dt><strong>visit_med75</strong></dt>
<dd><p>median(max(visit)) * 0.75</p></dd>

<dt><strong>mean_ae_site_med75</strong></dt>
<dd><p>mean AE at visit_med75 site level</p></dd>

<dt><strong>mean_ae_study_med75</strong></dt>
<dd><p>mean AE at visit_med75 study level</p></dd>

<dt><strong>n_pat_with_med75_study</strong></dt>
<dd><p>number of patients at site with
visit_med75 at study excl site</p></dd>

<dt><strong>extra_ur_sites</strong></dt>
<dd><p>additional sites
with under-reporting patients</p></dd>

<dt><strong>frac_pat_with_ur</strong></dt>
<dd><p>ratio of
patients in study that are under-reporting</p></dd>

<dt><strong>ur_rate</strong></dt>
<dd><p>under-reporting rate</p></dd>

<dt><strong>pval</strong></dt>
<dd><p>p-value as
returned by <code><a href="https://rdrr.io/r/stats/poisson.test.html" class="external-link">poisson.test</a></code></p></dd>

<dt><strong>prob_low</strong></dt>
<dd><p>bootstrapped probability for having mean_ae_site_med75
or lower</p></dd>
 <dt><strong>pval_adj</strong></dt>
<dd><p>adjusted p-values</p></dd>

<dt><strong>prob_low_adj</strong></dt>
<dd><p>adjusted bootstrapped probability for having
mean_ae_site_med75 or lower</p></dd>
 <dt><strong>pval_prob_ur</strong></dt>
<dd><p>probability
under-reporting as 1 - pval_adj, poisson.test (use as benchmark)</p></dd>

<dt><strong>prob_low_prob_ur</strong></dt>
<dd><p>probability under-reporting as 1 -
prob_low_adj, bootstrapped (use)</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function will apply under-reporting scenarios to each site.
Reducing the number of AEs by a given under-reporting (ur_rate) for all
patients at the site and add the corresponding under-reporting statistics.
Since the under-reporting probability is also affected by the number of
other sites that are under-reporting we additionally calculate
under-reporting statistics in a scenario where additional under reporting
sites are present. For this we use the median number of patients per site
at the study to calculate the final number of patients for which we lower
the AEs in a given under-reporting scenario. We use the furrr package to
implement parallel processing as these simulations can take a long time to
run. For this to work we need to specify the plan for how the code should
run, e.g. plan(multisession, workers = 18)</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="sim_test_data_study.html">sim_test_data_study</a></code>
<code><a href="get_config.html">get_config</a></code>
<code><a href="sim_test_data_portfolio.html">sim_test_data_portfolio</a></code>
<code>sim_ur_scenarios</code>
<code><a href="get_portf_perf.html">get_portf_perf</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">df_visit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_test_data_study.html">sim_test_data_study</a></span><span class="op">(</span>n_pat <span class="op">=</span> <span class="fl">100</span>, n_sites <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                                 frac_site_with_ur <span class="op">=</span> <span class="fl">0.4</span>, ur_rate <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_visit1</span><span class="op">$</span><span class="va">study_id</span> <span class="op">&lt;-</span> <span class="st">"A"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_visit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_test_data_study.html">sim_test_data_study</a></span><span class="op">(</span>n_pat <span class="op">=</span> <span class="fl">100</span>, n_sites <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                                 frac_site_with_ur <span class="op">=</span> <span class="fl">0.2</span>, ur_rate <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_visit2</span><span class="op">$</span><span class="va">study_id</span> <span class="op">&lt;-</span> <span class="st">"B"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_visit</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">df_visit1</span>, <span class="va">df_visit2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_site_max</span> <span class="op">&lt;-</span> <span class="va">df_visit</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">study_id</span>, <span class="va">site_number</span>, <span class="va">patnum</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>max_visit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">visit</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            max_ae <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">n_ae</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_config.html">get_config</a></span><span class="op">(</span><span class="va">df_site_max</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_config</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study_id ae_per_visit_mean site_number max_visit_sd max_visit_mean n_pat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0001                 0.381 0001                2.85           19.9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0001                 0.381 0002                3.31           18.1    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0001                 0.381 0003                3.14           18.1    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0001                 0.381 0004                4.74           20.7    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0001                 0.381 0005                5.20           19.2    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0001                 0.381 0006                3.30           21      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0001                 0.381 0007                4.07           19.9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0001                 0.381 0008                4.53           18.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0001                 0.381 0009                2.95           21.7    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0001                 0.381 0010                3.36           20.2    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 0002                 0.491 0001                3.03           20.9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 0002                 0.491 0002                2.44           18.8    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 0002                 0.491 0003                3.62           20.3    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> 0002                 0.491 0004                3.79           19.8    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> 0002                 0.491 0005                4.19           19.3    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> 0002                 0.491 0006                5.34           18.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> 0002                 0.491 0007                4.23           18.9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> 0002                 0.491 0008                3.28           18.9    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> 0002                 0.491 0009                5.33           18      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span> 0002                 0.491 0010                3.48           19.1    10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_portf</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_test_data_portfolio.html">sim_test_data_portfolio</a></span><span class="op">(</span><span class="va">df_config</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_portf</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,746 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study_id ae_per_visit_mean site_number max_visit_sd max_visit_mean patnum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0001                 0.381 0001                2.85           19.9 0001  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,736 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: visit &lt;int&gt;, n_ae &lt;int&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_scen</span> <span class="op">&lt;-</span> <span class="fu">sim_ur_scenarios</span><span class="op">(</span><span class="va">df_portf</span>,</span></span>
<span class="r-in"><span>                            extra_ur_sites <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                            ur_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> aggregating site level</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> prepping for simulation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> generating scenarios</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> getting under-reporting stats</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> evaluating stats</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_scen</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 140 × 14</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study_id site_number extra_ur_sites frac_pat_with_ur ur_rate n_pat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0001     0001                     0            0         0      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0001     0001                     0            0.122     0.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0001     0001                     0            0.122     1      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0001     0001                     1            0.222     0.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0001     0001                     1            0.222     1      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0001     0001                     2            0.322     0.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0001     0001                     2            0.322     1      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0001     0002                     0            0         0      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0001     0002                     0            0.104     0.5    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0001     0002                     0            0.104     1      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 130 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 8 more variables: n_pat_with_med75 &lt;dbl&gt;, visit_med75 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   mean_ae_site_med75 &lt;dbl&gt;, mean_ae_study_med75 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_pat_with_med75_study &lt;int&gt;, prob_low &lt;dbl&gt;, prob_low_adj &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   prob_low_prob_ur &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_perf</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_portf_perf.html">get_portf_perf</a></span><span class="op">(</span><span class="va">df_scen</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_perf</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 27 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      fpr thresh extra_ur_sites ur_rate   tpr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0.001  0.529              0     0    0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0.001  0.529              1     0    0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0.001  0.529              2     0    0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0.001  0.529              0     0.5  1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0.001  0.529              1     0.5  1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0.001  0.529              2     0.5  0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0.001  0.529              0     1    1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0.001  0.529              1     1    1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0.001  0.529              2     1    1   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0.01   0.517              0     0    0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 17 more rows</span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bjoern Koneswarakantha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

